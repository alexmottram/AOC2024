#TODO -> add pair output
#TODO -> improve handling of non-in-range vecs into array
#TODO -> improve casting of array types